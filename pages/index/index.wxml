<!-- pages/index/index.wxml -->
<view class="container">
  <view class="header">
    <view class="user-info">
      <block wx:if="{{!hasUserInfo && canIUse}}">
        <button open-type="getUserInfo" bindgetuserinfo="getUserInfo"> è·å–å¤´åƒæ˜µç§° </button>
      </block>
      <block wx:else>
        <image class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
        <text class="userinfo-nickname">{{userInfo.nickName}}</text>
      </block>
    </view>
  </view>
  
  <view class="child-info" wx:if="{{childInfo}}">
    <view class="child-header">
      <text class="child-name">{{childInfo.name}}</text>
      <text class="child-age">{{childInfo.age}}å²</text>
      <button class="edit-btn" bindtap="navigateToChildProfile">ç¼–è¾‘</button>
    </view>
    <view class="child-details">
      <view class="detail-item">
        <text class="label">è‹±è¯­æ°´å¹³:</text>
        <text class="value">{{childInfo.englishLevel}}</text>
      </view>
      <view class="detail-item">
        <text class="label">å…´è¶£çˆ±å¥½:</text>
        <text class="value">{{childInfo.interests}}</text>
      </view>
      <view class="detail-item">
        <text class="label">å­¦ä¹ æ—¶é•¿:</text>
        <text class="value">{{childInfo.learningTime}}åˆ†é’Ÿ</text>
      </view>
    </view>
  </view>
  
  <view class="ai-status">
    <text class="status-label">AIåŠ©æ‰‹çŠ¶æ€:</text>
    <text class="status-value {{aiStatus === 'åœ¨çº¿' ? 'online' : 'offline'}}">{{aiStatus}}</text>
  </view>
  
  <!-- ä¿®æ”¹å¿«æ·æ“ä½œåŒºåŸŸï¼Œä½¿æŒ‰é’®æ¨ªå‘æ’åˆ— -->
  <view class="quick-actions">
    <view class="action-item" bindtap="navigateToConversations">
      <view class="action-icon">ğŸ“</view>
      <text class="action-text">æŸ¥çœ‹å¯¹è¯</text>
    </view>
    <view class="action-item" bindtap="navigateToMaterials">
      <view class="action-icon">ğŸ“¤</view>
      <text class="action-text">å­¦ä¹ ææ–™</text>
    </view>
    <view class="action-item" bindtap="navigateToInstructions">
      <view class="action-icon">ğŸ“¢</view>
      <text class="action-text">å‘é€æŒ‡ä»¤</text>
    </view>
  </view>
  
  <!-- ä¼˜åŒ–æœ€è¿‘å¯¹è¯è®°å½•åŒºåŸŸ -->
  <view class="recent-conversations">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘å¯¹è¯</text>
      <text class="view-all" bindtap="navigateToConversations">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    <view class="conversation-container">
      <block wx:if="{{recentConversations.length > 0}}">
        <view class="conversation-item" wx:for="{{recentConversations}}" wx:key="id">
          <view class="conversation-time">{{item.time}}</view>
          <view class="conversation-preview">{{item.preview}}</view>
        </view>
      </block>
      <view class="empty-list" wx:else>
        <text>æš‚æ— å¯¹è¯è®°å½•</text>
      </view>
    </view>
  </view>
</view>
