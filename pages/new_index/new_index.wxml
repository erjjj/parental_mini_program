<!--new_index.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨æœç´¢å’Œæ“ä½œåŒºåŸŸ -->
  <view class="header">
    <view class="search-dropdown">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢æ™ºèƒ½ä½“" bindinput="onSearchInput" />
      <text class="dropdown-icon" bindtap="toggleDropdown">â–¼</text>
      
      <!-- ä¸‹æ‹‰èœå• -->
      <view class="dropdown-menu" wx:if="{{showDropdown}}">
        <view class="dropdown-item" wx:for="{{agentList}}" wx:key="id" bindtap="selectAgent" data-id="{{item.id}}">
          <image class="dropdown-avatar" src="{{item.avatar}}" mode="aspectFill"></image>
          <text class="dropdown-name">{{item.name}}</text>
        </view>
      </view>
    </view>
    
    <image class="header-agent-avatar" src="{{currentAgent.avatar}}" mode="aspectFill"></image>
    
    <!-- ç™»å½•/æ³¨å†ŒæŒ‰é’® -->
    <view class="login-btn" bindtap="navigateToLogin" wx:if="{{loginBtnVisible}}">
      <text>ç™»å½•/æ³¨å†Œ</text>
    </view>
  </view>
  
  <!-- æ™ºèƒ½ä½“ä¿¡æ¯å±•ç¤ºåŒºåŸŸ -->
  <view class="agent-info">
    <view class="agent-info-content">
      <text class="agent-name">{{currentAgent.name}}</text>
      <scroll-view scroll-y class="agent-description-scroll">
        <text class="agent-description">{{currentAgent.description}}</text>
      </scroll-view>
    </view>
    
    
  </view>

  <!-- çŠ¶æ€å’Œæ“ä½œæŒ‰é’®åŒºåŸŸ -->
  <view class="status-action-row">
    <!-- çŠ¶æ€æŒ‡ç¤ºæ¡ -->
    <view class="status-bar">
      <view class="status-icon" style="background-color: {{statusColor}}"></view>
      <text class="status-text">{{statusText}}</text>
    </view>
    
    <view class="settings-btn" bindtap="goToSettings">
      <text class="settings-icon">âš™ï¸</text>
      <text>è®¾ç½®è§’è‰²</text>
    </view>
    
    <view class="add-agent" bindtap="addNewAgent">
      <text class="add-icon">+</text>
      <text>æ·»åŠ è§’è‰²</text>
    </view>
  </view>


  <!-- éŸ³è‰²é€‰æ‹©åˆ—è¡¨ -->
  <view class="voice-list-container">
    <text class="voice-list-title">å¯é€‰éŸ³è‰²</text>
    <scroll-view class="voice-scroll" scroll-y="true">
      <view class="voice-item {{item.id === currentVoice.id ? 'active' : ''}}" 
            wx:for="{{voiceList}}" 
            wx:key="id"
            bindtap="selectVoice"
            data-id="{{item.id}}">
        <image class="voice-avatar" src="{{item.avatar}}" mode="aspectFill"></image>
        <view class="voice-info">
          <text class="voice-name">{{item.name}}</text>
          <text class="voice-description">{{item.description}}</text>
        </view>
        <view class="voice-play" catchtap="playVoiceSample" data-id="{{item.id}}">
          <text class="play-icon">â–¶</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view>