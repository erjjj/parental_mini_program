<!-- pages/deviceManagement/deviceManagement.wxml -->
<view class="container">
  <view class="header">
    <view class="back-btn" bindtap="goBack">
      <text class="back-icon">тЖР</text>
    </view>
    <text class="title">шо╛хдЗчобчРЖ</text>
  </view>
  
  <!-- шо╛хдЗхИЧшби -->
  <view class="device-list">
    <view class="section-title">х╖▓ч╗СхоЪшо╛хдЗ</view>
    
    <!-- цЧашо╛хдЗцЧ╢цШ╛чд║ -->
    <view class="empty-list" wx:if="{{deviceList.length === 0}}">
      <image class="empty-icon" src="/images/empty_file.png"></image>
      <text class="empty-text">цЪВцЧач╗СхоЪшо╛хдЗ</text>
      <button class="add-btn" bindtap="addDevice">ц╖╗хКашо╛хдЗ</button>
    </view>
    
    <!-- шо╛хдЗхИЧшби -->
    <view class="device-items" wx:else>
      <view class="device-item" wx:for="{{deviceList}}" wx:key="id">
        <view class="device-info">
          <view class="device-icon">{{item.icon || 'ЁЯУ▒'}}</view>
          <view class="device-details">
            <text class="device-name">{{item.name}}</text>
            <text class="device-status {{item.isConnected ? 'connected' : 'disconnected'}}">{{item.isConnected ? 'х╖▓ш┐ЮцОе' : 'цЬкш┐ЮцОе'}}</text>
            <text class="device-id">шо╛хдЗID: {{item.id}}</text>
          </view>
        </view>
        <view class="device-actions">
          <button class="action-btn {{item.isConnected ? 'disconnect-btn' : 'connect-btn'}}" 
                  bindtap="toggleConnection" data-id="{{item.id}}" data-status="{{item.isConnected}}">
            {{item.isConnected ? 'цЦнх╝Аш┐ЮцОе' : 'ш┐ЮцОе'}}
          </button>
          <button class="action-btn delete-btn" bindtap="unbindDevice" data-id="{{item.id}}">шзгщЩдч╗СхоЪ</button>
        </view>
      </view>
      
      <button class="add-btn" bindtap="addDevice">ц╖╗хКашо╛хдЗ</button>
    </view>
  </view>
  
  <!-- ц╖╗хКашо╛хдЗх╝╣чкЧ -->
  <view class="modal" wx:if="{{showAddDeviceModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">ц╖╗хКашо╛хдЗ</text>
        <text class="close-btn" bindtap="closeModal">├Ч</text>
      </view>
      <view class="modal-body">
        <view class="form-item">
          <text class="form-label">шо╛хдЗID</text>
          <input class="form-input" placeholder="шп╖ш╛УхЕешо╛хдЗID" bindinput="inputDeviceId" value="{{newDevice.id}}"/>
        </view>
        <view class="form-item">
          <text class="form-label">шо╛хдЗхРНчз░</text>
          <input class="form-input" placeholder="шп╖ш╛УхЕешо╛хдЗхРНчз░" bindinput="inputDeviceName" value="{{newDevice.name}}"/>
        </view>
        <button class="confirm-btn" bindtap="confirmAddDevice">чбошодц╖╗хКа</button>
      </view>
    </view>
  </view>
</view>